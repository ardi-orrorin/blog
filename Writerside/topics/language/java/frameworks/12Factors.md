# 12-Factors

## Overview
2002년 헤로쿠 개발자가 만든 방법론으로 주된 목표는 마이크로 서비스 구축을 위한 12가지 모범 사례를 제시하는 것이다.  
이 방법론은 클라우드 네이티브 애플리케이션을 만들기 위한 방법론이다.

## 1. 코드베이스(codebase)
버전 관리 시스템을 통해 관리되는 하나의 코드베이스가 하나의 앱을 의미한다.
코드베이스는 앱 사이에는 항 상 1대1관계를 갖는다.
버전 관리는 Git, Mercurial, Subversion 등을 사용할 수 있다.

![](https://12factor.net/images/codebase-deploys.png)


## 2. 의존성(dependencies)
전체 시스템에 특정 패키지가 암묵적으로 존재하는 것을 절대 의존하지 않으며,
앱이 실행되기 위해서는 명시적으로 선언된 의존성만을 사용해야 한다.
또한 의존성 분리 툴을 사용하여 암묵적으로 의존성'유출'이 발생하지 않는 것을 보장한다.

## 3. 설정(config)
설정은 절대 코드에 저장하지 않는 것을 원칙으로 한다.
마이크로서비스에서는 분리해서 관리하는 것을 권장한다.

## 4. 백엔드 서비스(backing services)
DB 및 기타 백엔드 관련된 서비스는 로컬 및 서드파티를 구별하지 않으며,  
코드를 수정하지 않고도 로컬에서 서드파트로 전환할 수 있어야한다.

![](https://12factor.net/images/attached-resources.png)

## 5. 빌드, 릴리즈, 실행(build, release, run)
빌드, 릴리즈, 실행을 엄격하게 분리하여 각각의 단계를 명확히 구분한다.
빌드 단계에서는 의존성을 관리하고,  
릴리즈 단계에서는 설정을 적용하며,  
실행 단계에서는 빌드와 릴리즈 단계에서 준비된 앱을 실행한다.
[](https://12factor.net/images/release.png)

## 6. 프로세스(processes)
항상 무상태(stateless)가 되어야하며 요청받은 트랜잭션을 수행하는 데 필요한 정보만 포함돼야 한다.

<tip>stateless : 클라이언트와 서버 관계에서 서바가 클라이언트의 상태를 보존하지 않음을 의미
</tip>

## 7. 포트 바인딩(port binding)
특정 포트로 서비스를 게시하는 것을 원칙으로 한다.

## 8. 동시성(concurrency)
프로세스 모델의 통한 확장이 가능해야 한다.
cpu ram 같은 성능을 늘리는 것을 수직 확장이라고 하며,
노드와 같은 물리적인 수를 늘리는 것을 수평 확장이라고 한다.

![](https://12factor.net/images/process-types.png)

## 9. 폐기 가능(disposability)
필요에 따라 프로세스를 빠르게 시작하고 종료할 수 있어야 한다.
다른 서비스에 영향을 주지 않고 새로운 인스턴스로, 실패한 인스턴스를 제거할 수 있다는 것을 의미한다.


## 10. 개발/운영 환경 일치(dev/prod parity)
development, staging, production 환경을 최대한 비슷하게 유지

코드 커밋되는 즉시 테스트를 거쳐 개발 환경에서 운영 환경까지 가능한 신속하게 이동해야 한다.

- 시간의 차이를 최소화: 개발자가 작성한 코드는 몇 시간, 심지어 몇 분 후에 배포됩니다.
- 담당자의 차이를 최소화: 코드를 작성한 개발자들이 배포와 production에서의 모니터링에 깊게 관여합니다.
- 툴의 차이를 최소화: 개발과 production 환경을 최대한 비슷하게 유지합니다.


## 11. 로그(logs)
아웃풋 스트림의 전달이나 저장에 절대 관여하지 않습니다.  
app은 로그 파일을 작성하거나, 관리하려고 해서는 안된다.  
로컬 개발환경에서 작업 중인 개발자는 app의 동작을 관찰하기 원하면 각자의 터미널에 출력되는 이 스트림을 볼 수 있습니다.

대표적으로 ELK 스택을 사용한다.

## 12. 관리 프로세스(admin processes)
개발자들은 종종 일회성 관리나 유지 보수 작업이 필요한데,
이런 작업은 app의 일부가 아니라 별도의 프로세스로 실행되어야 한다.
예를 들어, 데이터베이스 마이그레이션, 일회성 작업, 재시작 등이 있다.

<seealso>
<category ref="ref">
<a href="https://12factor.net">12Factor</a>
</category>
</seealso>